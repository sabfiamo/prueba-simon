"use strict";let flash,turn,good,compTurn,intervalId,win,order=[],playerOrder=[],strict=!1,noise=!0,on=!1;const turnCounter=document.querySelector("#turn"),topLeft=document.querySelector("#topleft"),topRight=document.querySelector("#topright"),bottomLeft=document.querySelector("#bottomleft"),bottomRight=document.querySelector("#bottomright"),strictButton=document.querySelector("#strict"),onButton=document.querySelector("#on"),startButton=document.querySelector("#start");function play(){win=!1,order=[],playerOrder=[],flash=0,intervalId=0,turn=1,turnCounter.innerHTML=1,good=!0;for(let t=0;t<10;t++)order.push(Math.floor(4*Math.random())+1);compTurn=!0,intervalId=setInterval(gameTurn,800)}function gameTurn(){on=!1,flash===turn&&(clearInterval(intervalId),compTurn=!1,clearColor(),on=!0),compTurn&&(clearColor(),setTimeout(()=>{1===order[flash]&&one(),2===order[flash]&&two(),3===order[flash]&&three(),4===order[flash]&&four(),flash++},200))}function one(){if(noise){document.getElementById("clip1").play()}noise=!0,topLeft.style.backgroundColor="lightgreen"}function two(){if(noise){document.getElementById("clip2").play()}noise=!0,topRight.style.backgroundColor="tomato"}function three(){if(noise){document.getElementById("clip3").play()}noise=!0,bottomLeft.style.backgroundColor="yellow"}function four(){if(noise){document.getElementById("clip4").play()}noise=!0,bottomRight.style.backgroundColor="lightskyblue"}function clearColor(){topLeft.style.backgroundColor="darkgreen",topRight.style.backgroundColor="darkred",bottomLeft.style.backgroundColor="goldenrod",bottomRight.style.backgroundColor="darkblue"}function flashColor(){topLeft.style.backgroundColor="lightgreen",topRight.style.backgroundColor="tomato",bottomLeft.style.backgroundColor="yellow",bottomRight.style.backgroundColor="lightskyblue"}function check(){playerOrder[playerOrder.length-1]!==order[playerOrder.length-1]&&(good=!1),10===playerOrder.length&&good&&winGame(),!1===good&&(flashColor(),turnCounter.innerHTML="NOP!",setTimeout(()=>{turnCounter.innerHTML=turn,clearColor(),strict?play():(compTurn=!0,flash=0,playerOrder=[],good=!0,intervalId=setInterval(gameTurn,800))},800),noise=!1),turn===playerOrder.length&&good&&!win&&(turn++,playerOrder=[],compTurn=!0,flash=0,turnCounter.innerHTML=turn,intervalId=setInterval(gameTurn,800))}function winGame(){flashColor(),turnCounter.innerHTML="WIN!",on=!1,win=!0}strictButton.addEventListener("click",()=>{strict=!0===strictButton.checked}),onButton.addEventListener("click",()=>{!0===onButton.checked?(on=!0,turnCounter.innerHTML="-"):(on=!1,turnCounter.innerHTML="",clearColor(),clearInterval(intervalId))}),startButton.addEventListener("click",()=>{(on||win)&&play()}),topLeft.addEventListener("click",()=>{on&&(playerOrder.push(1),check(),one(),win||setTimeout(()=>{clearColor()},300))}),topRight.addEventListener("click",()=>{on&&(playerOrder.push(2),check(),two(),win||setTimeout(()=>{clearColor()},300))}),bottomLeft.addEventListener("click",()=>{on&&(playerOrder.push(3),check(),three(),win||setTimeout(()=>{clearColor()},300))}),bottomRight.addEventListener("click",()=>{on&&(playerOrder.push(4),check(),four(),win||setTimeout(()=>{clearColor()},300))});